(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){},141:function(e,t){},143:function(e,t){},157:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(4),r=(n(90),n(115),n(117),n(0)),l=n.n(r),i=n(79),s=n.n(i),u=(n(124),n(25)),m=n(13);n(125);function d(){return l.a.createElement("footer",{className:"info"},l.a.createElement("p",null,"Double-click to edit a todo"),l.a.createElement("p",null,"Created by ",l.a.createElement("a",{href:"http://github.com/jacob-ebey/"},"jacob-ebey")),l.a.createElement("p",null,"Part of ",l.a.createElement("a",{href:"http://todomvc.com"},"TodoMVC")),l.a.createElement("p",null,"Modified for urbit by ~rabsef-bicrym"))}var f=n(10),p=n(80),b=n.n(p);function v(e,t){return Object(r.useCallback)(function(t){"Enter"===t.key&&(t.preventDefault(),e(t))},t)}var h=n(86);function g(e){var t=Object(r.useState)(e.todo.label),n=Object(f.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(e.todo.id),i=Object(f.a)(c,2),s=i[0],u=(i[1],Object(r.useState)(!1)),m=Object(f.a)(u,2),d=m[0],p=m[1],b=e.api,g=Object(r.useCallback)(function(){return e=s,void b.poke({app:"todoreact",mark:"todoreact-action",json:{"remove-task":parseInt(e)}});var e},[s]),k=Object(r.useCallback)(function(){return e=s,void b.poke({app:"todoreact",mark:"todoreact-action",json:{"mark-complete":parseInt(e)}});var e},[s]),E=function(e,t){var n,a=[];return function(o){for(var c=arguments.length,r=new Array(c>1?c-1:0),l=1;l<c;l++)r[l-1]=arguments[l];a.push((new Date).getTime()),clearTimeout(n),n=setTimeout(function(){a.length>1&&a[a.length-1]-a[a.length-2]<250?t&&t.apply(void 0,[o].concat(r)):e&&e.apply(void 0,[o].concat(r)),a=[]},250)}}(null,function(){return p(!0)}),j=Object(r.useCallback)(function(){console.log("setting urbit state to ".concat(a," for task ").concat(s)),b.poke({app:"todoreact",mark:"todoreact-action",json:{"edit-task":{id:parseInt(s),label:a}}}),p(!1)},[a]),w=v(j,[a]),O=Object(r.useRef)();return Object(h.a)(O,j),l.a.createElement("li",{onClick:E,className:"".concat(d?"editing":""," ").concat(e.todo.done?"completed":"")},l.a.createElement("div",{className:"view"},l.a.createElement("input",{type:"checkbox",className:"toggle",checked:e.todo.done,onChange:k,autoFocus:!0}),l.a.createElement("label",null,a),l.a.createElement("button",{className:"destroy",onClick:g})),d&&l.a.createElement("input",{ref:O,className:"edit",value:a,id:s,onChange:function(e){o(e.target.value)},onKeyPress:w}))}function k(e){var t=b()(),n=Object(r.useState)([]),a=Object(f.a)(n,2),o=a[0],c=a[1],i=e.api;Object(r.useEffect)(function(){i.subscribe({app:"todoreact",path:"/mytasks",event:function(e){c(e)}},[o,c])},[]);var s=Object(r.useMemo)(function(){return o.reduce(function(e,t){return e+(t.done?0:1)},0)},[o]),d=Object(r.useMemo)(function(){return t.match.params.filter?o.filter(function(e){return"active"===t.match.params.filter?!e.done:e.done}):o},[o,t.match.params.filter]),p=Object(r.useMemo)(function(){return o.some(function(e){return e.done})},[o]),h=Object(r.useMemo)(function(){return d.every(function(e){return e.done})},[d]),k=Object(r.useCallback)(function(){d.forEach(function(e){return 3(e.id,!h)})},[d,h]),E=Object(r.useCallback)(function(){o.forEach(function(e){var t;e.done&&(t=e.id,i.poke({app:"todoreact",mark:"todoreact-action",json:{"remove-task":t}}))})},[o]),j=function(e){var t=Object(r.useState)(e||""),n=Object(f.a)(t,2),a=n[0],o=n[1];return[a,Object(r.useCallback)(function(e){o(e.target.value)}),o]}(),w=Object(f.a)(j,3),O=w[0],y=w[1],C=w[2],N=v(function(){var e;O&&(e=O,i.poke({app:"todoreact",mark:"todoreact-action",json:{"add-task":e}}),C(""))},[O]),x=e.api;return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{className:"header"},l.a.createElement("h1",null,"todos"),l.a.createElement("input",{className:"new-todo",placeholder:"What needs to be done?",onKeyPress:N,value:O,onChange:y})),l.a.createElement("section",{className:"main"},l.a.createElement("input",{id:"toggle-all",type:"checkbox",className:"toggle-all",checked:h,onChange:k}),l.a.createElement("label",{htmlFor:"toggle-all"}),l.a.createElement("ul",{className:"todo-list"},d&&d.map(function(e){return l.a.createElement(m.Route,{key:"todoItem-".concat(e.id),render:function(t){return console.log("todoItem-".concat(e.id)),l.a.createElement(g,Object.assign({todo:e,api:x},t))}})}))),l.a.createElement("footer",{className:"footer"},l.a.createElement("span",{className:"todo-count"},l.a.createElement("strong",null,s)," items left"),l.a.createElement("ul",{className:"filters"},l.a.createElement("li",null,l.a.createElement(u.b,{exact:!0,to:"/",activeClassName:"selected"},"All")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/active",activeClassName:"selected"},"Active")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/completed",activeClassName:"selected"},"Completed"))),p&&l.a.createElement("button",{className:"clear-completed",onClick:E},"Clear completed")))}function E(e){var t=e.api;return l.a.createElement(u.a,null,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"todoapp"},l.a.createElement(m.Route,{key:"my-route",path:"/:filter?",render:function(e){return l.a.createElement(k,Object.assign({api:t},e))}})),l.a.createElement(d,null)))}var j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var O=n(85),y=n(84),C=Object(y.memoize)(Object(c.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.authenticate({ship:"nus",url:"138.197.192.56:8080",code:"bortem-pinwyl-macnyx-topdeg",verbose:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))),N=document.getElementById("root");Object(c.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,s.a.render(l.a.createElement(E,{api:t}),N);case 4:case"end":return e.stop()}},e,this)}))(),function(e){if("serviceWorker"in navigator){if(new URL("/~todoreact",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/~todoreact","/service-worker.js");j?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):w(t,e)})}}()},87:function(e,t,n){e.exports=n(157)}},[[87,1,2]]]);
//# sourceMappingURL=main.22949569.chunk.js.map